<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>Hadoop集群搭建</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 id="hadoop集群搭建" data-anchor-id="hsz5">Hadoop集群搭建</h1><p data-anchor-id="kw8r"><code>Hadoop</code><a href="../index.html" style="float:right"><strong>Home</strong></a></p><hr><div class="md-section-divider"></div><h3 id="内容目录" data-anchor-id="87xw">内容目录</h3><p data-anchor-id="lun7"><div class="toc"><div class="toc">
<ul>
<li><a href="#hadoop集群搭建">Hadoop集群搭建</a><ul>
<li><ul>
<li><a href="#内容目录">内容目录</a></li>
<li><a href="#集群环境">集群环境</a></li>
<li><a href="#jdk配置">JDK配置</a></li>
<li><a href="#配置ssh免密码登陆">配置SSH免密码登陆</a></li>
<li><a href="#ip和hadoop节点的映射关系">IP和hadoop节点的映射关系</a></li>
<li><a href="#hadoop集群配置">Hadoop集群配置</a></li>
<li><a href="#验证">验证</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
</p><div class="md-section-divider"></div><h3 id="集群环境" data-anchor-id="lwlc">集群环境</h3><ul data-anchor-id="ufws">
<li>CentOS 7 64位</li>
<li>JDK 1.8.0_65</li>
<li>Hadoop 2.2.0</li>
<li>集群节点3个，分别是hadoop-master，hadoop-slave-1，hadoop-slave-2</li>
</ul><div class="md-section-divider"></div><h3 id="jdk配置" data-anchor-id="7inw">JDK配置</h3><p data-anchor-id="5g83">默认机器上安装openJDK，为保存系统稳定，安装oracle JDK。 <br>
为对所有用户生效，需要修改<code>/etc/profile</code></p><div class="md-section-divider"></div><pre style="" data-anchor-id="m10f" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="com"># 使用root账号修改</span></code></li><li class="L1"><code class="language-shell"><span class="com"># java config</span></code></li><li class="L2"><code class="language-shell"><span class="kwd">export</span><span class="pln"> JAVA_HOME</span><span class="pun">=</span><span class="str">/usr/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span></code></li><li class="L3"><code class="language-shell"><span class="kwd">export</span><span class="pln"> JRE_HOME</span><span class="pun">=</span><span class="pln">$</span><span class="pun">{</span><span class="pln">JAVA_HOME</span><span class="pun">}/</span><span class="pln">jre</span></code></li><li class="L4"><code class="language-shell"><span class="kwd">export</span><span class="pln"> CLASSPATH</span><span class="pun">=.:</span><span class="pln">$</span><span class="pun">{</span><span class="pln">JAVA_HOME</span><span class="pun">}/</span><span class="pln">lib</span><span class="pun">:</span><span class="pln">$</span><span class="pun">{</span><span class="pln">JRE_HOME</span><span class="pun">}/</span><span class="pln">lib</span></code></li><li class="L5"><code class="language-shell"><span class="kwd">export</span><span class="pln"> PATH</span><span class="pun">=</span><span class="pln">$</span><span class="pun">{</span><span class="pln">JAVA_HOME</span><span class="pun">}/</span><span class="pln">bin</span><span class="pun">:</span><span class="pln">$PATH</span></code></li><li class="L6"><code class="language-shell"></code></li><li class="L7"><code class="language-shell"><span class="com"># 修改后立刻生效</span></code></li><li class="L8"><code class="language-shell"><span class="com"># 需要注意的是，如果在root下执行，则root账号下配置立刻生效</span></code></li><li class="L9"><code class="language-shell"><span class="com"># 如果想要在其他用户下生效，需要切换到其他账号再次执行此命令</span></code></li><li class="L0"><code class="language-shell"><span class="pln">source </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">profile</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="com"># 将oracle JDK设置为默认，目录为java文件存放目录</span></code></li><li class="L3"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">install </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">java java </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">java </span><span class="lit">300</span><span class="pln">  </span></code></li><li class="L4"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">install </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javac javac </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javac </span><span class="lit">300</span><span class="pln">  </span></code></li><li class="L5"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">install </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">jar jar </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">jar </span><span class="lit">300</span><span class="pln">   </span></code></li><li class="L6"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">install </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javah javah </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javah </span><span class="lit">300</span><span class="pln">   </span></code></li><li class="L7"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">install </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javap javap </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">jdk1</span><span class="pun">.</span><span class="lit">8.0</span><span class="pln">_65</span><span class="pun">/</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">javap </span><span class="lit">300</span></code></li><li class="L8"><code class="language-shell"></code></li><li class="L9"><code class="language-shell"><span class="com"># 配置java</span></code></li><li class="L0"><code class="language-shell"><span class="pln">update</span><span class="pun">-</span><span class="pln">alternatives </span><span class="pun">--</span><span class="pln">config java</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="com"># 测试java版本</span></code></li><li class="L3"><code class="language-shell"><span class="pln">java </span><span class="pun">-</span><span class="pln">version</span></code></li><li class="L4"><code class="language-shell"></code></li><li class="L5"><code class="language-shell"><span class="com"># 结果显示正常，则说明java环境配置好</span></code></li></ol></pre><div class="md-section-divider"></div><h3 id="配置ssh免密码登陆" data-anchor-id="k26z">配置SSH免密码登陆</h3><p data-anchor-id="97dt">详细参考：Linux SSH配置无密码登陆</p><div class="md-section-divider"></div><h3 id="ip和hadoop节点的映射关系" data-anchor-id="cbd8">IP和hadoop节点的映射关系</h3><p data-anchor-id="fcb3">修改<code>/etc/hosts</code>文件，加入IP和hadoop机器名之间的映射关系 <br>
需要注意的是，需要将集群中的每台机器上的此文件都修改为如下内容</p><div class="md-section-divider"></div><pre style="" data-anchor-id="655s" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="lit">127.0</span><span class="pun">.</span><span class="lit">0.1</span><span class="pln">   localhost localhost</span><span class="pun">.</span><span class="pln">localdomain localhost4 localhost4</span><span class="pun">.</span><span class="pln">localdomain4</span></code></li><li class="L1"><code class="language-shell"><span class="lit">10.11</span><span class="pun">.</span><span class="lit">22.</span><span class="pun">***</span><span class="pln"> hadoop</span><span class="pun">-</span><span class="pln">master</span></code></li><li class="L2"><code class="language-shell"><span class="lit">10.11</span><span class="pun">.</span><span class="lit">22.</span><span class="pun">***</span><span class="pln"> hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">2</span></code></li><li class="L3"><code class="language-shell"><span class="lit">10.11</span><span class="pun">.</span><span class="lit">22.</span><span class="pun">***</span><span class="pln"> hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">1</span></code></li></ol></pre><div class="md-section-divider"></div><h3 id="hadoop集群配置" data-anchor-id="s49u">Hadoop集群配置</h3><p data-anchor-id="ceuh">在<a target="_blank" href="https://archive.apache.org/dist/hadoop/common/">官网</a>上下载文件<code>hadoop-2.2.0.tar.gz</code> <br>
在配置之前需要创建文件目录：~/tmp、~/dfs/data、~/dfs/name。需要配置的文件在<code>~/hadoop-2.2.0/etc/hadoop</code>中，包含以下文件</p><div class="md-section-divider"></div><pre style="" data-anchor-id="yef2" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">-</span><span class="pln">env</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L1"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">yarn</span><span class="pun">-</span><span class="pln">env</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L2"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">slaves</span></code></li><li class="L3"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">core</span><span class="pun">-</span><span class="pln">site</span><span class="pun">.</span><span class="pln">xml</span></code></li><li class="L4"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">hdfs</span><span class="pun">-</span><span class="pln">site</span><span class="pun">.</span><span class="pln">xml</span></code></li><li class="L5"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">mapred</span><span class="pun">-</span><span class="pln">site</span><span class="pun">.</span><span class="pln">xml</span></code></li><li class="L6"><code class="language-shell"><span class="pun">~</span><span class="str">/hadoop-2.2.0/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">yarn</span><span class="pun">-</span><span class="pln">site</span><span class="pun">.</span><span class="pln">xml</span></code></li></ol></pre><ul data-anchor-id="e363">
<li><p>配置文件1：hadoop-env.sh <br>
修改JAVA_HOME值，原值为<code>${JAVA_HOME}</code>，虽然系统设置了<code>JAVA_HOME</code>值，但此处仍然需要修改为具体的文件位置，否则后面启动报错。</p></li>
<li><p>配置文件2：yarn-en.sh <br>
修改JAVA_HOME值，同上</p></li>
<li><p>配置文件：slaves <br>
直接添加slave机器的机器名即可， 不需要在这里设置master的名字</p></li>
</ul><div class="md-section-divider"></div><pre style="" data-anchor-id="9a7l" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="pln">hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">1</span></code></li><li class="L1"><code class="language-shell"><span class="pln">hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">2</span></code></li></ol></pre><ul data-anchor-id="qms8">
<li>配置文件4：core-site.xml <br>
此处一定要注意，<code>hdfs://hadoop-master:9000</code>中，一定要填写master机器的机器名，不是任意填写</li>
</ul><div class="md-section-divider"></div><pre style="" data-anchor-id="ef3x" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;configuration&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">fs.default.name</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hdfs://hadoop-master:9000</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">hadoop.tmp.dir</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">/home/hadoop/tmp</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;/configuration&gt;</span></code></li></ol></pre><ul data-anchor-id="uazb">
<li>配置文件5：hdfs-site.xml</li>
</ul><div class="md-section-divider"></div><pre style="" data-anchor-id="auas" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;configuration&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">dfs.namenode.secondary.http-address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:9001</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">dfs.namenode.name.dir</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">file:/home/hadoop/dfs/name</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">dfs.datanode.data.dir</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">file:/home/hadoop/dfs/data</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">dfs.replication</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">3</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">dfs.webhdfs.enabled</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">true</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;/configuration&gt;</span></code></li></ol></pre><ul data-anchor-id="dav1">
<li>配置文件6：mapred-site.xml</li>
</ul><div class="md-section-divider"></div><pre style="" data-anchor-id="uqak" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;configuration&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">mapreduce.framework.name</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">yarn</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">mapreduce.jobhistory.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:10020</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">mapreduce.jobhistory.webapp.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:19888</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;/configuration&gt;</span></code></li></ol></pre><ul data-anchor-id="1zje">
<li>配置文件7：yarn-site.xml</li>
</ul><div class="md-section-divider"></div><pre style="" data-anchor-id="7yj6" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;configuration&gt;</span></code></li><li class="L1"><code class="language-xml"></code></li><li class="L2"><code class="language-xml"><span class="com">&lt;!-- Site specific YARN configuration properties --&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.nodemanager.aux-services</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">mapreduce_shuffle</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.nodemanager.aux-services.mapreduce.shuffle.class</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">org.apache.hadoop.mapred.ShuffleHandler</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.resourcemanager.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:8032</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.resourcemanager.scheduler.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:8030</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.resourcemanager.resource-tracker.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:8035</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.resourcemanager.admin.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:8033</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="tag">&lt;property&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="tag">&lt;name&gt;</span><span class="pln">yarn.resourcemanager.webapp.address</span><span class="tag">&lt;/name&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;value&gt;</span><span class="pln">hadoop-master:8088</span><span class="tag">&lt;/value&gt;</span></code></li><li class="L0"><code class="language-xml"><span class="tag">&lt;/property&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="tag">&lt;/configuration&gt;</span></code></li></ol></pre><p data-anchor-id="9tfv">master机器上Hadoop配置结束后，需要将hadoo整个文件夹拷贝到slave机器上，需要在slave主机上配置好java环境</p><div class="md-section-divider"></div><pre style="" data-anchor-id="kve4" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="pln">scp </span><span class="pun">-</span><span class="pln">r </span><span class="pun">./</span><span class="pln">etc hadoop@hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">1</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">-</span><span class="lit">2.2</span><span class="pun">.</span><span class="lit">0</span><span class="pun">/</span></code></li><li class="L1"><code class="language-shell"><span class="pln">scp </span><span class="pun">-</span><span class="pln">r </span><span class="pun">./</span><span class="pln">etc hadoop@hadoop</span><span class="pun">-</span><span class="pln">slave</span><span class="pun">-</span><span class="lit">2</span><span class="pun">:</span><span class="str">/home/</span><span class="pln">hadoop</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">-</span><span class="lit">2.2</span><span class="pun">.</span><span class="lit">0</span><span class="pun">/</span></code></li></ol></pre><div class="md-section-divider"></div><h3 id="验证" data-anchor-id="eerd">验证</h3><p data-anchor-id="flm7">所有的组件启动和停止在<code>~/hadoop/sbin</code>目录下，一般启动hadoop前需要先格式化namenode。</p><div class="md-section-divider"></div><pre style="" data-anchor-id="ehay" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="com"># 进入hadoop目录</span></code></li><li class="L1"><code class="language-shell"><span class="pln">cd </span><span class="pun">~/</span><span class="pln">hadoop</span><span class="pun">-</span><span class="lit">2.2</span><span class="pun">.</span><span class="lit">0</span></code></li><li class="L2"><code class="language-shell"></code></li><li class="L3"><code class="language-shell"><span class="com"># 格式化namenode</span></code></li><li class="L4"><code class="language-shell"><span class="pun">./</span><span class="pln">bin</span><span class="pun">/</span><span class="pln">hdfs namenode </span><span class="pun">-</span><span class="pln">format</span></code></li><li class="L5"><code class="language-shell"></code></li><li class="L6"><code class="language-shell"><span class="com"># 启动hdfs</span></code></li><li class="L7"><code class="language-shell"><span class="pun">./</span><span class="pln">sbin</span><span class="pun">/</span><span class="pln">start</span><span class="pun">-</span><span class="pln">dfs</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L8"><code class="language-shell"><span class="com"># 输入jps查询启动进程</span></code></li><li class="L9"><code class="language-shell"><span class="com"># master包含进程NameNode/SecondaryNameNode</span></code></li><li class="L0"><code class="language-shell"><span class="com"># slave包含进程Datanode</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="com"># 启动yarn</span></code></li><li class="L3"><code class="language-shell"><span class="pun">./</span><span class="pln">sbin</span><span class="pun">/</span><span class="pln">start</span><span class="pun">-</span><span class="pln">yarn</span><span class="pun">.</span><span class="pln">sh</span></code></li><li class="L4"><code class="language-shell"><span class="com"># master包含进程NameNode/SecondaryNameNode/ResourceManager</span></code></li><li class="L5"><code class="language-shell"><span class="com"># slave包含进程Datanode/NodeManager</span></code></li><li class="L6"><code class="language-shell"></code></li><li class="L7"><code class="language-shell"><span class="com"># 如果输入jps没有输出结果，需要检查java环境是否设置好</span></code></li><li class="L8"><code class="language-shell"></code></li><li class="L9"><code class="language-shell"><span class="com"># hdfs状态查看地址</span></code></li><li class="L0"><code class="language-shell"><span class="pln">http</span><span class="pun">:</span><span class="com">//hadoop-master:50070</span></code></li></ol></pre><p data-anchor-id="x6jd">参考链接： <br>
<a target="_blank" href="http://blog.csdn.net/liyong199012/article/details/24019333">Hadoop 2.2.0集群搭建</a></p></div>
</body>
</html>