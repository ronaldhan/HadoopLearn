<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>Sqoop从PostgreSQL中导入数据到HDFS/Hbase</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 id="sqoop从postgresql中导入数据到hdfshbase" data-anchor-id="zr89">Sqoop从PostgreSQL中导入数据到HDFS/Hbase</h1><p data-anchor-id="afrn"><code>Hadoop</code> <code>Sqoop</code> <code>PostgreSQL</code> <code>Hbase</code><a href="../index.html" style="float:right"><strong>Home</strong></a></p><hr><p data-anchor-id="sfx8">Sqoop是一个转换工具，用于在关系型数据库与HDFS之间进行数据转换.</p><div class="md-section-divider"></div><h3 id="安装" data-anchor-id="u1xi">安装</h3><p data-anchor-id="x2zl">使用的版本是sqoop-1.4.3.bin__hadoop-1.0.0.tar.gz，打算安装在/usr/local目录下。 <br>
首先就是解压缩，重命名为sqoop，然后在文件/etc/profile中设置环境变量SQOOP_HOME。 <br>
把PostgreSQL的jdbc驱动postgresql-9.4-1201.jdbc4.jar复制到sqoop项目的lib目录下和hadoop的lib目录下。 <br>
将sqoop-1.4.3.jar复制到hadoop的lib目录下。</p><div class="md-section-divider"></div><h3 id="重命名配置文件" data-anchor-id="80l7">重命名配置文件</h3><p data-anchor-id="wzgd">在${SQOOP_HOME}/conf中执行命令:</p><blockquote class="white-blockquote" data-anchor-id="i0kl">
  <p>mv  sqoop-env-template.sh  sqoop-env.sh</p>
</blockquote><p data-anchor-id="a88z">在conf目录下，有两个文件sqoop-site.xml和sqoop-site-template.xml内容是完全一样的，不必在意，我们只关心sqoop-site.xml即可。</p><div class="md-section-divider"></div><h3 id="修改配置文件sqoop-envsh" data-anchor-id="pjfu">修改配置文件sqoop-env.sh</h3><div class="md-section-divider"></div><pre style="" data-anchor-id="vsyf" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="com">#Set path to where bin/hadoop is available</span></code></li><li class="L1"><code class="language-shell"><span class="kwd">export</span><span class="pln"> HADOOP_COMMON_HOME</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">hadoop</span><span class="pun">/</span></code></li><li class="L2"><code class="language-shell"></code></li><li class="L3"><code class="language-shell"><span class="com">#Set path to where hadoop-*-core.jar is available</span></code></li><li class="L4"><code class="language-shell"><span class="kwd">export</span><span class="pln"> HADOOP_MAPRED_HOME</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">hadoop</span></code></li><li class="L5"><code class="language-shell"></code></li><li class="L6"><code class="language-shell"><span class="com">#set the path to where bin/hbase is available</span></code></li><li class="L7"><code class="language-shell"><span class="kwd">export</span><span class="pln"> HBASE_HOME</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">hbase</span></code></li><li class="L8"><code class="language-shell"></code></li><li class="L9"><code class="language-shell"><span class="com">#Set the path to where bin/hive is available</span></code></li><li class="L0"><code class="language-shell"><span class="kwd">export</span><span class="pln"> HIVE_HOME</span><span class="pun">=</span><span class="str">/usr/</span><span class="kwd">local</span><span class="pun">/</span><span class="pln">hive</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="com">#Set the path for where zookeper config dir is</span></code></li><li class="L3"><code class="language-shell"><span class="com">#没有安装zookeeper,此项不设置</span></code></li><li class="L4"><code class="language-shell"><span class="com">#export ZOOCFGDIR=</span></code></li></ol></pre><p data-anchor-id="f48h">在${SQOOP_HOME}/bin中有configure-sqoop文件,需要注释掉其中的部分内容</p><div class="md-section-divider"></div><pre style="" data-anchor-id="p2rl" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="com"># 注释掉这些可以去掉每次sqoop执行时的warning</span></code></li><li class="L1"><code class="language-shell"><span class="com">#if [ -z "${HBASE_HOME}" ]; then</span></code></li><li class="L2"><code class="language-shell"><span class="com">#  if [ -d "/usr/lib/hbase" ]; then</span></code></li><li class="L3"><code class="language-shell"><span class="com">#    HBASE_HOME=/usr/lib/hbase</span></code></li><li class="L4"><code class="language-shell"><span class="com">#  else</span></code></li><li class="L5"><code class="language-shell"><span class="com">#    HBASE_HOME=${SQOOP_HOME}/../hbase</span></code></li><li class="L6"><code class="language-shell"><span class="com">#  fi</span></code></li><li class="L7"><code class="language-shell"><span class="com">#fi</span></code></li><li class="L8"><code class="language-shell"></code></li><li class="L9"><code class="language-shell"><span class="com">#if [ -z "${ZOOKEEPER_HOME}" ]; then</span></code></li><li class="L0"><code class="language-shell"><span class="com">#  if [ -d "/usr/lib/zookeeper" ]; then</span></code></li><li class="L1"><code class="language-shell"><span class="com">#    ZOOKEEPER_HOME=/usr/lib/zookeeper</span></code></li><li class="L2"><code class="language-shell"><span class="com">#  else</span></code></li><li class="L3"><code class="language-shell"><span class="com">#    ZOOKEEPER_HOME=${SQOOP_HOME}/../zookeeper</span></code></li><li class="L4"><code class="language-shell"><span class="com">#  fi</span></code></li><li class="L5"><code class="language-shell"><span class="com">#fi</span></code></li><li class="L6"><code class="language-shell"></code></li><li class="L7"><code class="language-shell"><span class="com">## Moved to be a runtime check in sqoop.</span></code></li><li class="L8"><code class="language-shell"><span class="com"># if [ ! -d "${HBASE_HOME}" ]; then</span></code></li><li class="L9"><code class="language-shell"><span class="com">#   echo "Warning: $HBASE_HOME does not exist! HBase imports will fail."</span></code></li><li class="L0"><code class="language-shell"><span class="com">#   echo 'Please set $HBASE_HOME to the root of your HBase installation.'</span></code></li><li class="L1"><code class="language-shell"><span class="com"># fi</span></code></li><li class="L2"><code class="language-shell"></code></li><li class="L3"><code class="language-shell"><span class="com">#if [ ! -d "${ZOOKEEPER_HOME}" ]; then</span></code></li><li class="L4"><code class="language-shell"><span class="com">#  echo "Warning: $ZOOKEEPER_HOME does not exist! Accumulo imports will fail."</span></code></li><li class="L5"><code class="language-shell"><span class="com">#  echo 'Please set $ZOOKEEPER_HOME to the root of your Zookeeper installation.'</span></code></li><li class="L6"><code class="language-shell"><span class="com">#fi</span></code></li></ol></pre><div class="md-section-divider"></div><h3 id="把数据从postgresql导入到hdfs中" data-anchor-id="gf88">把数据从postgresql导入到hdfs中</h3><p data-anchor-id="g2n8">postgresql数据库postgres中有表,需要导入hdfs中,执行命令如下</p><div class="md-section-divider"></div><pre style="" data-anchor-id="f0f1" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="pln">sqoop </span><span class="com">##sqoop命令</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="kwd">import</span><span class="pln"> </span><span class="com">##表示导入</span></code></li><li class="L3"><code class="language-shell"></code></li><li class="L4"><code class="language-shell"><span class="pun">--</span><span class="pln">connect jdbc</span><span class="pun">:</span><span class="pln">postgresql</span><span class="pun">:</span><span class="com">//ip:5432/postgres ##告诉jdbc，连接postgresql的url</span></code></li><li class="L5"><code class="language-shell"></code></li><li class="L6"><code class="language-shell"><span class="pun">--</span><span class="pln">username postgres </span><span class="com">##连接postgresql的用户名</span></code></li><li class="L7"><code class="language-shell"></code></li><li class="L8"><code class="language-shell"><span class="pun">-</span><span class="pln">P </span><span class="com">##手动输入连接postgresql的密码</span></code></li><li class="L9"><code class="language-shell"></code></li><li class="L0"><code class="language-shell"><span class="pun">--</span><span class="pln">table sinaweibo </span><span class="com">##从postgresql导出的表名称</span></code></li><li class="L1"><code class="language-shell"></code></li><li class="L2"><code class="language-shell"><span class="pun">--</span><span class="pln">fields</span><span class="pun">-</span><span class="pln">terminated</span><span class="pun">-</span><span class="kwd">by</span><span class="pln"> </span><span class="str">'\t'</span><span class="pln"> </span><span class="com">##指定输出文件中的行的字段分隔符</span></code></li><li class="L3"><code class="language-shell"></code></li><li class="L4"><code class="language-shell"><span class="pun">-</span><span class="pln">m </span><span class="lit">1</span><span class="pln"> </span><span class="com">##复制过程使用1个map作业,如果数值大于1,需要表具有主键,并且为整型</span></code></li></ol></pre><p data-anchor-id="q0cv">命令的所有内容不能换行，只能一行才能执行.</p><p data-anchor-id="na86"><strong>该命令执行结束后，观察hdfs的目录/user/{USER_NAME}，下面会有一个文件夹是aa，里面有个文件是part-m-00000。该文件的内容就是数据表aa的内容，字段之间是使用制表符分割的.</strong></p><p data-anchor-id="t33o">在这个命令中，有一个参数“-m”，代表的含义是使用多少个并行，这个参数的值是1，说明没有开启并行功能。</p><div class="md-section-divider"></div><h3 id="并行执行sqoop任务" data-anchor-id="6dr0">并行执行Sqoop任务</h3><p data-anchor-id="8vts">一般来说，Sqoop就会开启4个进程，同时进行数据的导入操作。但是，如果导入的表没有主键，那么会出现如下的错误提示：</p><div class="md-section-divider"></div><pre style="" data-anchor-id="io6n" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="pln">ERROR tool</span><span class="pun">.</span><span class="typ">ImportTool</span><span class="pun">:</span><span class="pln"> </span><span class="typ">Error</span><span class="pln"> during </span><span class="kwd">import</span><span class="pun">:</span><span class="pln"> </span><span class="typ">No</span><span class="pln"> primary key could be found </span><span class="kwd">for</span><span class="pln"> table creater_user</span><span class="pun">.</span><span class="pln">popt_cas_redirect_his</span><span class="pun">.</span><span class="pln"> </span><span class="typ">Please</span><span class="pln"> specify one </span><span class="kwd">with</span><span class="pln"> </span><span class="pun">--</span><span class="pln">split</span><span class="pun">-</span><span class="kwd">by</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> perform a sequential </span><span class="kwd">import</span><span class="pln"> </span><span class="kwd">with</span><span class="pln"> </span><span class="str">'-m 1'</span><span class="pun">.</span></code></li></ol></pre><p data-anchor-id="96j9">在这种情况下，为了更好的使用Sqoop的并行导入功能，我们就需要从原理上理解Sqoop并行导入的实现机制。如果需要并行导入的表的主键是id，并行的数量是4，那么Sqoop首先会执行如下一个查询：</p><div class="md-section-divider"></div><pre style="" data-anchor-id="z8en" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="kwd">select</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> max</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">select</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">as</span><span class="pln"> min </span><span class="kwd">from</span><span class="pln"> table </span><span class="pun">[</span><span class="kwd">where</span><span class="pln"> </span><span class="pun">如果指定了</span><span class="kwd">where</span><span class="pun">子句];</span></code></li></ol></pre><p data-anchor-id="x4ex">通过这个查询，获取到需要拆分字段（id）的最大值和最小值，假设分别是1和1000。然后，Sqoop会根据需要并行导入的数量，进行拆分查询，比如上面的这个例子，并行导入将拆分为如下4条SQL同时执行：</p><div class="md-section-divider"></div><pre style="" data-anchor-id="o5ez" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="kwd">select</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> table </span><span class="kwd">where</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">250</span><span class="pun">;</span></code></li><li class="L1"><code class="language-sql"></code></li><li class="L2"><code class="language-sql"><span class="kwd">select</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> table </span><span class="kwd">where</span><span class="pln"> </span><span class="lit">250</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">500</span><span class="pun">;</span></code></li><li class="L3"><code class="language-sql"></code></li><li class="L4"><code class="language-sql"><span class="kwd">select</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> table </span><span class="kwd">where</span><span class="pln"> </span><span class="lit">500</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">750</span><span class="pun">;</span></code></li><li class="L5"><code class="language-sql"></code></li><li class="L6"><code class="language-sql"><span class="kwd">select</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> table </span><span class="kwd">where</span><span class="pln"> </span><span class="lit">750</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> id </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">1000</span><span class="pun">;</span></code></li></ol></pre><p data-anchor-id="70hc">注意，这个拆分的字段需要是整数。从上面的例子可以看出，如果需要导入的表没有主键，我们应该如何手动选取一个合适的拆分字段，以及选择合适的并行数。  <br>
我们要导入表<code>creater_user.popt_cas_redirect_his</code>。这个表没有主键，所以我们需要手动选取一个合适的拆分字段。 <br>
首先看看这个表都有哪些字段, 然后，我假设ds_name字段是一个可以选取的拆分字段，然后执行下面的sql去验证我的想法：</p><div class="md-section-divider"></div><pre style="" data-anchor-id="gwxq" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="kwd">select</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">ds_name</span><span class="pun">),</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">ds_name</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> creater_user</span><span class="pun">.</span><span class="pln">popt_cas_redirect_his </span><span class="kwd">where</span><span class="pln"> data_desc</span><span class="pun">=</span><span class="str">'2011-02-26'</span></code></li></ol></pre><p data-anchor-id="1ehw">发现结果不理想，min和max的值都是相等的。所以这个字段不合适作为拆分字段。 <br>
再测试一下另一个字段：CLIENTIP</p><div class="md-section-divider"></div><pre style="" data-anchor-id="375n" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="kwd">select</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">CLIENTIP</span><span class="pun">),</span><span class="pln"> max</span><span class="pun">(</span><span class="pln">CLIENTIP</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">from</span><span class="pln"> creater_user</span><span class="pun">.</span><span class="pln">popt_cas_redirect_his </span><span class="kwd">where</span><span class="pln"> data_desc</span><span class="pun">=</span><span class="str">'2011-02-26'</span></code></li></ol></pre><p data-anchor-id="y6sj">这个结果还是不错的。所以我们使用CLIENTIP字段作为拆分字段。所以，我们使用如下命令并行导入：</p><div class="md-section-divider"></div><pre style="" data-anchor-id="fylm" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="pln">sqoop </span><span class="kwd">import</span><span class="pln"> </span><span class="pun">--</span><span class="pln">append </span><span class="pun">--</span><span class="pln">connect $CONNECTURL </span><span class="pun">--</span><span class="pln">username $ORACLENAME </span><span class="pun">--</span><span class="pln">password $ORACLEPASSWORD </span><span class="pun">--</span><span class="pln">target</span><span class="pun">-</span><span class="pln">dir $hdfsPath  </span><span class="pun">-</span><span class="pln">m </span><span class="lit">12</span><span class="pln"> </span><span class="pun">--</span><span class="pln">split</span><span class="pun">-</span><span class="kwd">by</span><span class="pln"> CLIENTIP </span><span class="pun">--</span><span class="pln">table $oralceTableName </span><span class="pun">--</span><span class="pln">columns $columns </span><span class="pun">--</span><span class="pln">fields</span><span class="pun">-</span><span class="pln">terminated</span><span class="pun">-</span><span class="kwd">by</span><span class="pln"> </span><span class="str">'\001'</span><span class="pln">  </span><span class="pun">--</span><span class="kwd">where</span><span class="pln"> </span><span class="str">"data_desc='2011-02-26'"</span><span class="pln"> </span></code></li></ol></pre><p data-anchor-id="au9e">另外一个参考例子</p><div class="md-section-divider"></div><pre style="" data-anchor-id="dbv1" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-shell"><span class="com"># 使用split-by指定使用分割的字段</span></code></li><li class="L1"><code class="language-shell"><span class="pln">sqoop </span><span class="kwd">import</span><span class="pln"> </span><span class="pun">--</span><span class="pln">connect jdbc</span><span class="pun">:</span><span class="pln">postgresql</span><span class="pun">:</span><span class="com">//hadoop-master:5432/sdb --username gpadmin -P  --table bld1w --fields-terminated-by '\t' --split-by gid -m 4</span></code></li></ol></pre><div class="md-section-divider"></div><h3 id="从hdfs中导入到postgresql" data-anchor-id="4c9s">从hdfs中导入到postgresql</h3><p data-anchor-id="gkdc">把数据导入到hdfs的数据导出到postgresql中。我们已知该文件有两个字段，使用制表符分隔的。那么，我们现在数据库test中创建一个数据表叫做bb，里面有两个字段。然后执行下面的命令</p><div class="md-section-divider"></div><pre style="" data-anchor-id="fg7g" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-bash"><span class="pln">sqoop </span><span class="com">##sqoop命令</span></code></li><li class="L1"><code class="language-bash"></code></li><li class="L2"><code class="language-bash"><span class="pln">export </span><span class="com">##表示导入</span></code></li><li class="L3"><code class="language-bash"></code></li><li class="L4"><code class="language-bash"><span class="pun">--</span><span class="pln">connect jdbc</span><span class="pun">:</span><span class="pln">postgresql</span><span class="pun">://</span><span class="pln">ip</span><span class="pun">:</span><span class="lit">3306</span><span class="pun">/</span><span class="pln">postgres </span><span class="com">##连接postgresql的url</span></code></li><li class="L5"><code class="language-bash"></code></li><li class="L6"><code class="language-bash"><span class="pun">--</span><span class="pln">username postgres </span><span class="com">##连接postgresql的用户名</span></code></li><li class="L7"><code class="language-bash"></code></li><li class="L8"><code class="language-bash"><span class="pun">--</span><span class="pln">password admin </span><span class="com">##连接postgresql的密码</span></code></li><li class="L9"><code class="language-bash"></code></li><li class="L0"><code class="language-bash"><span class="pun">--</span><span class="pln">table bb </span><span class="com">##postgresql中的表，即将被导入的表名称</span></code></li><li class="L1"><code class="language-bash"></code></li><li class="L2"><code class="language-bash"><span class="pun">--</span><span class="pln">fields</span><span class="pun">-</span><span class="pln">terminated</span><span class="pun">-</span><span class="pln">by </span><span class="str">'\t'</span><span class="pln"> </span><span class="com">##指定输出文件中的行的字段分隔符</span></code></li><li class="L3"><code class="language-bash"></code></li><li class="L4"><code class="language-bash"><span class="pun">--</span><span class="pln">export</span><span class="pun">-</span><span class="pln">dir </span><span class="str">'/user/root/aa/part-m-00000'</span><span class="pln"> </span><span class="com">##hive中被导出的文件</span></code></li></ol></pre><hr><div class="md-section-divider"></div><h3 id="从postgresql中导入到hbase" data-anchor-id="760p">从PostgreSQL中导入到Hbase</h3><p data-anchor-id="80sn">基本过程和导入到hdfs类似,将所有的列导入到一个列族中,命令如下:</p><div class="md-section-divider"></div><pre style="" data-anchor-id="501o" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-bash"><span class="pln">sqoop import \</span></code></li><li class="L1"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">connect jdbc</span><span class="pun">:</span><span class="pln">postgresql</span><span class="pun">://</span><span class="pln">localhost</span><span class="pun">:</span><span class="lit">5432</span><span class="pun">/</span><span class="pln">postgres \</span></code></li><li class="L2"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">username postgres </span><span class="pun">--</span><span class="pln">password ronald \</span></code></li><li class="L3"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">table ft_grid_center  \ </span><span class="pun">//需要导入的关系表</span></code></li><li class="L4"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">hbase</span><span class="pun">-</span><span class="pln">table ft_grid_center \ </span><span class="pun">//导入到</span><span class="pln">hbase</span><span class="pun">后的表</span></code></li><li class="L5"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">column</span><span class="pun">-</span><span class="pln">family coordinate \ </span><span class="pun">//表中对应的列族</span></code></li><li class="L6"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">hbase</span><span class="pun">-</span><span class="pln">row</span><span class="pun">-</span><span class="pln">key gid \ </span><span class="pun">//</span><span class="pln">rowkey</span><span class="pun">对应的关系表的键</span></code></li><li class="L7"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">hbase</span><span class="pun">-</span><span class="pln">create</span><span class="pun">-</span><span class="pln">table \ </span><span class="pun">//创建新表</span></code></li></ol></pre><p data-anchor-id="u3s5">如果要表中不同的列导入到不同的列族,使用一下语句:</p><div class="md-section-divider"></div><pre style="" data-anchor-id="f8no" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-bash"><span class="pln">sqoop import </span></code></li><li class="L1"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">connect jdbc</span><span class="pun">:</span><span class="pln">postgresql</span><span class="pun">://</span><span class="pln">localhost</span><span class="pun">:</span><span class="lit">5432</span><span class="pun">/</span><span class="pln">postgres </span></code></li><li class="L2"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">username postgres </span><span class="pun">--</span><span class="pln">password ronald </span></code></li><li class="L3"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">table weibo_ft_all </span></code></li><li class="L4"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">columns </span><span class="str">"gid,id,uid,source,utext"</span><span class="pln"> </span><span class="pun">//导入的列</span></code></li><li class="L5"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">hbase</span><span class="pun">-</span><span class="pln">table weibo_ft_all </span></code></li><li class="L6"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">column</span><span class="pun">-</span><span class="pln">family </span><span class="typ">ContentInfo</span><span class="pln"> </span><span class="pun">//对应的列族</span></code></li><li class="L7"><code class="language-bash"><span class="pln">    </span><span class="pun">--</span><span class="pln">hbase</span><span class="pun">-</span><span class="pln">row</span><span class="pun">-</span><span class="pln">key gid  </span></code></li><li class="L8"><code class="language-bash"><span class="pln">    </span><span class="pun">-</span><span class="pln">m </span><span class="lit">1</span></code></li></ol></pre><p data-anchor-id="0keq">需要在导入之前修改表,添加对应的列族</p><div class="md-section-divider"></div><pre style="" data-anchor-id="44kf" class="prettyprint linenums prettyprinted"><ol class="linenums"><li class="L0"><code class="language-sql"><span class="pln">disable </span><span class="str">'weibo_ft_all'</span></code></li><li class="L1"><code class="language-sql"><span class="pln">alter </span><span class="str">'weibo_ft_all'</span><span class="pun">,</span><span class="pln"> NAME</span><span class="pun">=&gt;</span><span class="str">'ContentInfo'</span></code></li><li class="L2"><code class="language-sql"><span class="pln">enable </span><span class="str">'weibo_ft_all'</span></code></li></ol></pre><p data-anchor-id="1xi6">参考链接 <br>
<a target="_blank" href="http://www.superwu.cn/2013/08/12/444/">Sqoop的安装与使用</a> <br>
<a target="_blank" href="http://www.cnblogs.com/gpcuster/archive/2011/03/01/1968027.html">利用Sqoop将数据从数据库导入到HDFS</a> <br>
<a target="_blank" href="http://www.dummies.com/how-to/content/importing-data-into-hbase-with-sqoop.html" title="关系数据库导入数据到Hbase">利用Sqoop将数据从数据库数据导入Hbase</a> <br>
<a target="_blank" href="http://www.jb51.net/article/31172.htm">hbase shell基础和常用命令详解</a></p></div>
</body>
</html>